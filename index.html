<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>testkita</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- スタート画面のコンテナ -->
  <div id="start-screen" class="start-screen">
    <div class="start-title">研究室ツアー</div>
    <div class="instructions-container">
      <div class="instructions-title">使い方</div>
      <div class="instructions-text">
        ・スマホを縦持ちにして好きな方向に向けることで研究室を360°見回すことができます<br>
        ・左上のメニューから気になる研究室を選んでみてください<br>
        ・"ホームページ"ボタン：研究室のホームページに飛ぶことができます<br>
        ・"視点リセット"ボタン：最初の視点の方向に戻ります
      </div>
    </div>
    <button id="start-button" class="start-button">スタート</button>
  </div>
  
  <div id="content-container" class="hidden">
    <div class="openbtn4">
      <span></span><span></span><span></span>
    </div>
    <div class="button-container" id="button-container">
      <!-- ボタンがここに動的に追加されます -->
    </div>
    
    <!-- URLボタンコンテナ -->
    <div class="url-button-container">
      <button id="reset-button" class="url-button">視点リセット</button>
      <button id="home-button" class="url-button">ホームページ</button>
    </div>
  
    <a-scene>
      <!-- 4方向の矢印 -->
      <a-entity position="0 2 -3">
        <a-text id="north-text" value="器具A" position="0 0.5 0"></a-text>
        <a-plane id="north-arrow" color="#007bb5" height="0.2" width="0.8" rotation="0 0 0"></a-plane>
      </a-entity>

      <a-entity position="3 2 0">
        <a-text id="east-text" value="器具B" position="0 0.5 0"></a-text>
        <a-plane id="east-arrow" color="#007bb5" height="0.2" width="0.8" rotation="0 90 0"></a-plane>
      </a-entity>

      <a-entity position="0 2 3">
        <a-text id="south-text" value="器具C" position="0 0.5 0"></a-text>
        <a-plane id="south-arrow" color="#007bb5" height="0.2" width="0.8" rotation="0 180 0"></a-plane>
      </a-entity>

      <a-entity position="-3 2 0">
        <a-text id="west-text" value="器具D" position="0 0.5 0"></a-text>
        <a-plane id="west-arrow" color="#007bb5" height="0.2" width="0.8" rotation="0 -90 0"></a-plane>
      </a-entity>
      
      <a-camera id="camera" position="0 1.6 0"></a-camera>
    </a-scene>
  </div>
  
<script src="hum.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // スタートボタンのクリックイベント
        document.getElementById('start-button').onclick = function() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('content-container').classList.remove('hidden');

            initializeContent();
        };

        function initializeContent() {
            const camera = document.getElementById('camera');

            // カメラの回転に応じて器具名を変更する関数
            camera.addEventListener('componentchanged', function (event) {
                if (event.detail.name === 'rotation') {
                    updateEquipmentText(camera.getAttribute('rotation').y);
                }
            });
        }

        function updateEquipmentText(rotationY) {
            // カメラの回転に基づいて表示するテキストを変更
            const northText = document.getElementById('north-text');
            const eastText = document.getElementById('east-text');
            const southText = document.getElementById('south-text');
            const westText = document.getElementById('west-text');

            if (rotationY > 45 && rotationY <= 135) {
                northText.setAttribute('value', '器具B');
                eastText.setAttribute('value', '器具C');
                southText.setAttribute('value', '器具D');
                westText.setAttribute('value', '器具A');
            } else if (rotationY > 135 && rotationY <= 225) {
                northText.setAttribute('value', '器具C');
                eastText.setAttribute('value', '器具D');
                southText.setAttribute('value', '器具A');
                westText.setAttribute('value', '器具B');
            } else if (rotationY > 225 && rotationY <= 315) {
                northText.setAttribute('value', '器具D');
                eastText.setAttribute('value', '器具A');
                southText.setAttribute('value', '器具B');
                westText.setAttribute('value', '器具C');
            } else {
                northText.setAttribute('value', '器具A');
                eastText.setAttribute('value', '器具B');
                southText.setAttribute('value', '器具C');
                westText.setAttribute('value', '器具D');
            }
        }
    });
</script>
</body>
</html>

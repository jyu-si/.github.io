<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>testkita</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* スタート画面のスタイル */
    .start-screen {
      background-color: #E0F7FA;
      position: fixed;
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10; /* スタート画面を前面に */
    }

    .start-title {
      font-size: 48px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .instructions-container {
      background-color: #FFFFFF;
      width: 60%;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      margin-bottom: 40px;
    }

    .instructions-title {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .instructions-text {
      font-size: 16px;
      line-height: 1.5;
    }

    .start-button {
      padding: 15px 30px;
      font-size: 24px;
      background-color: #008CBA;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: auto;
      margin-bottom: 20px;
    }

    .start-button:hover {
      background-color: #007bb5;
    }

    /* 矢印のスタイル */
    .arrow {
      position: fixed;
      font-size: 48px;
      color: white;
      cursor: pointer;
      z-index: 5; /* A-Frame要素よりも前に表示 */
    }

    #arrow-left {
      left: 20px;
      top: 50%;
    }

    #arrow-right {
      right: 20px;
      top: 50%;
    }

    /* 方角ごとの説明を表示するテキスト */
    .equipment-description {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-size: 24px;
      background-color: rgba(0, 0, 0, 0.5);
      padding: 10px;
      border-radius: 10px;
      z-index: 5;
    }

    /* ハンバーガーメニューのスタイル */
    .openbtn4 {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 6; /* ハンバーガーボタンを前面に */
      background: #4CAF50;
      cursor: pointer;
      width: 50px;
      height: 50px;
      border-radius: 5px;
    }

    .openbtn4 span {
      display: inline-block;
      transition: all 0.4s;
      position: absolute;
      left: 14px;
      height: 2px;
      border-radius: 5px;
      background: #fff;
      width: 45%;
    }

    .openbtn4 span:nth-of-type(1) {
      top: 13px;
    }

    .openbtn4 span:nth-of-type(2) {
      top: 19px;
    }

    .openbtn4 span:nth-of-type(3) {
      top: 25px;
    }

    /* ボタンやテキストを前面に表示するためのZ-index調整 */
    .url-button-container {
      position: absolute;
      bottom: 10px;
      left: 10px;
      z-index: 6;
    }

    .url-button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #008CBA;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }

    .url-button:hover {
      background-color: #007bb5;
    }

    /* 研究室名テキストのスタイル */
    #id-text, #label-text {
      position: fixed;
      z-index: 6; /* A-Frame要素の前にテキストを表示 */
    }

    /* 透明プレーンのスタイル */
    a-plane {
      z-index: 1;
    }
  </style>
</head>
<body>
  <!-- スタート画面のコンテナ -->
  <div id="start-screen" class="start-screen">
    <div class="start-title">研究室ツアー</div>

    <div class="instructions-container">
      <div class="instructions-title">使い方</div>
      <div class="instructions-text">
        ・スマホを縦持ちにして好きな方向に向けることで研究室を360°見回すことができます<br>
        ・左上のメニューから気になる研究室を選んでみてください<br>
        ・"ホームページ"ボタン：研究室のホームページに飛ぶことができます<br>
        ・"視点リセット"ボタン：最初の視点の方向に戻ります
      </div>
    </div>

    <button id="start-button" class="start-button">スタート</button>
  </div>

  <div id="content-container" class="hidden">
    <!-- 左右矢印 -->
    <div id="arrow-left" class="arrow">←</div>
    <div id="arrow-right" class="arrow">→</div>

    <!-- 方角ごとの説明を表示するテキスト -->
    <div id="equipment-description" class="equipment-description">北の器具: プロジェクター</div>

    <a-scene>
      <a-sky id="image" src="1214820_m.jpg"></a-sky>
      <a-entity id="camera-wrapper">
        <a-camera id="camera" position="0 1.6 0"></a-camera>
      </a-entity>
      <a-entity position="0 2.8 -2">
        <!-- 透明度のある白いプレーン -->
        <a-plane color="#FFFFFF" opacity="0.35" width="3.5" height="1.5" position="0 0.1 -0.01"></a-plane>

        <!-- idのテキスト -->
        <a-text id="id-text" 
                value="視覚メディア研"
                align="center" 
                color="#000000" 
                width="6" 
                position="0 0.3 0">
        </a-text>

        <!-- labelのテキスト -->
        <a-text id="label-text" 
                value="今井研究室"  
                align="center" 
                color="#000000" 
                width="4"  
                position="1.0 -0.2 0">
        </a-text>
      </a-entity>
    </a-scene>
  </div>

<script src="hum.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // スタートボタンのクリックイベント
        document.getElementById('start-button').onclick = function() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('content-container').classList.remove('hidden');

            // コンテンツが表示された後に視点リセットとホームページボタンの初期化を行う
            initializeContent();
        };

        // 方角に応じた器具の説明を設定
        const descriptions = {
            north: "北の器具: プロジェクター",
            east: "東の器具: ホワイトボード",
            south: "南の器具: 実験台",
            west: "西の器具: 書棚"
        };
        let currentDirection = 'north';

        function updateDescription() {
            const descriptionElement = document.getElementById('equipment-description');
            descriptionElement.innerText = descriptions[currentDirection];
        }

        document.getElementById('arrow-left').onclick = function() {
            switch (currentDirection) {
                case 'north': currentDirection = 'west'; break;
                case 'west': currentDirection = 'south'; break;
                case 'south': currentDirection = 'east'; break;
                case 'east': currentDirection = 'north'; break;
            }
            updateDescription();
        };

        document.getElementById('arrow-right').onclick = function() {
            switch (currentDirection) {
                case 'north': currentDirection = 'east'; break;
                case 'east': currentDirection = 'south'; break;
                case 'south': currentDirection = 'west'; break;
                case 'west': currentDirection = 'north'; break;
            }
            updateDescription();
        };
    });

    function initializeContent() {
        var resetButton = document.getElementById('reset-button');
        var homeButton = document.getElementById('home-button');

        if (resetButton) {
            resetButton.addEventListener('click', function() {
                resetView();
            });
        }

        if (homeButton) {
            homeButton.addEventListener('click', function() {
                window.goToURL();
            });
        }
    }

    function resetView() {
        var camera = document.getElementById('camera');

        camera.removeAttribute('look-controls');

        camera.setAttribute('position', { x: 0, y: 1.6, z: 0 });
        camera.setAttribute('rotation', { x: 0, y: 0, z: 0 });

        setTimeout(function() {
            camera.setAttribute('look-controls', '');
        }, 100);
    }
</script>
</body>
</html>
